import{$ as _,a3 as h,q as w,k,a as l,b,m as x,e as a,w as r,F as V,n as v,f as d}from"./index-9ca6b9fc.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";const D={setup(){return{Message:_,Lock:h,validationRules:{email:[{required:!0,message:"Email is required",trigger:"blur"},{type:"email",message:"Email is not in correct format",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"},{min:5,message:"Password length should be at least 5 characters",trigger:"blur"}]}}},data(){return{formData:{email:"",password:""},loading:!1}},methods:{async login(){if(this.loading=!0,!await this.$refs.form.validate()){this.loading=!1;return}await w(async e=>{var s;const m=await e.post("/auth/login",this.formData),t=k(),{data:o}=m;t.$patch(o);const n={name:(s=this.$router.currentRoute.value.query.redirect)==null?void 0:s.toString()};await this.$router.push(n||{name:"workshops"})},{userErrorCb:e=>e.error("Check the e-mail or password and try again!")}),this.loading=!1}}},q=v("h2",null,"Login",-1);function C(c,e,m,t,o,n){const s=l("el-input"),i=l("el-form-item"),p=l("el-button"),f=l("el-form"),g=l("router-link");return b(),x(V,null,[q,a(f,{model:o.formData,"label-position":"right",size:"large",rules:t.validationRules,ref:"form","status-icon":""},{default:r(()=>[a(i,{prop:"email"},{default:r(()=>[a(s,{modelValue:o.formData.email,"onUpdate:modelValue":e[0]||(e[0]=u=>o.formData.email=u),placeholder:"E-mail","prefix-icon":t.Message,autofocus:""},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{prop:"password"},{default:r(()=>[a(s,{modelValue:o.formData.password,"onUpdate:modelValue":e[1]||(e[1]=u=>o.formData.password=u),type:"password",placeholder:"Password","prefix-icon":t.Lock},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,null,{default:r(()=>[a(p,{type:"primary",onClick:n.login,loading:o.loading},{default:r(()=>[d("Login")]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"]),a(g,{to:"signup"},{default:r(()=>[d("Dont have an account?")]),_:1})],64)}const P=y(D,[["render",C]]);export{P as default};
