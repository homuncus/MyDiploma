import{d as S,k as B,r as $,p as R,a as r,z as T,b as c,c as _,w as t,n as a,e as l,m as A,F as N,B as F,g as f,f as V,D as L,A as q,t as C,q as z,v as O,x as Y,Z,_ as j,l as G,u as H,y as J}from"./index-9ca6b9fc.js";import"./DayJs-c6e502d2.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const D=g=>(O("data-v-b39ca1ae"),g=g(),Y(),g),M=D(()=>a("p",{class:"text-2xl font-bold"},"Profile",-1)),Q=D(()=>a("hr",{class:"mt-2 mb-4"},null,-1)),W={class:"form-item-wrapper"},X=D(()=>a("div",{class:"note"},[a("p",null,"Your name may appear around the site where you contribute")],-1)),ee={class:"form-item-wrapper"},oe=D(()=>a("div",{class:"note"},[a("p",null,"Tell everyone about you")],-1)),se={class:"form-item-wrapper"},te={class:"form-item-wrapper"},ae=S({__name:"ProfilePage",setup(g){const i=B(),{user:d}=i,p=$(!1),o=R({username:d.username,about:d.about,pronouns:d.pronouns}),n=$(null),h=async()=>{if(p.value=!0,!n.value.validate()){p.value=!1;return}await z(async e=>{await e.patch(`/users/${d.id}`,o)},{successCb:e=>{e.success({message:"Successfully updated your info!"}),i.$patch({user:o})},userErrorCb:e=>{e.error({message:"Error. Check the data."})}}),p.value=!1},b={username:[{validator:(y,e,w)=>{if(!e)return w(new Error("Username is required"))},trigger:"blur"}]},U=[{value:""},{value:"they/them"},{value:"she/her"},{value:"he/him"}].map((y,e)=>({...y,id:e}));return(y,e)=>{const w=r("el-input"),m=r("el-form-item"),s=r("el-option"),v=r("el-select"),P=r("el-button"),k=r("el-form"),E=T("loading");return c(),_(k,{model:o,rules:b,size:"large",class:"flex flex-col",ref_key:"form",ref:n,"label-position":"top"},{default:t(()=>[M,Q,a("div",W,[l(m,{class:"mb-0",label:"Username",prop:"username"},{default:t(()=>[l(w,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=u=>o.username=u)},null,8,["modelValue"])]),_:1}),X]),a("div",ee,[l(m,{label:"Bio",prop:"about"},{default:t(()=>[l(w,{type:"textarea",maxlength:"300","show-word-limit":"",modelValue:o.about,"onUpdate:modelValue":e[1]||(e[1]=u=>o.about=u)},null,8,["modelValue"])]),_:1}),oe]),a("div",se,[l(m,{label:"Pronouns",prop:"pronouns"},{default:t(()=>[l(v,{modelValue:o.pronouns,"onUpdate:modelValue":e[3]||(e[3]=u=>o.pronouns=u)},{default:t(()=>[(c(!0),A(N,null,F(f(U),u=>(c(),_(s,{key:u.id,value:u.value||"-"},{default:t(()=>[V(L(u.value||"Don't specify"),1)]),_:2},1032,["value"]))),128)),l(w,{modelValue:o.pronouns,"onUpdate:modelValue":e[2]||(e[2]=u=>o.pronouns=u),clearable:"",placeholder:"Custom"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),a("div",te,[q((c(),_(P,{color:"#4a934a",size:"default",onClick:h,plain:"",dark:f(C)},{default:t(()=>[V("Save")]),_:1},8,["dark"])),[[E,p.value]])])]),_:1},8,["model"])}}});const le=K(ae,[["__scopeId","data-v-b39ca1ae"]]),re=a("p",{class:"text-2xl font-bold"},"Theme preferences",-1),ne=a("hr",{class:"mt-2 mb-4"},null,-1),ue={class:"form-item-wrapper"},ce=S({__name:"AppearancePage",setup(g){return(i,d)=>{const p=r("el-switch"),o=r("el-form-item"),n=r("el-form");return c(),_(n,{size:"large",class:"flex flex-col",ref:"form","label-position":"top"},{default:t(()=>[re,ne,a("div",ue,[l(o,{class:"mb-0",prop:"dark"},{default:t(()=>[l(p,{"inactive-color":"#fcc115","active-color":"#151996",modelValue:f(C),"onUpdate:modelValue":d[0]||(d[0]=h=>Z(C)?C.value=h:null),onChange:f(j),class:"mb-2","active-text":"Dark","inactive-text":"Light"},null,8,["modelValue","onChange"])]),_:1})])]),_:1},512)}}}),ie=a("p",{class:"text-2xl font-bold"},"Account settings",-1),de=a("hr",{class:"mt-2 mb-4"},null,-1),pe={class:"form-item-wrapper"},me={class:"form-item-wrapper mt-4"},_e=a("span",{class:"text-lg"},"Are you sure? This cannot be undone!",-1),fe=S({__name:"AccountPage",setup(g){const i=B(),d=G(),{user:p}=i,o=$(!1),n=R({password:"",confirmPassword:""}),h=$(),b=$(!1),U=async()=>{if(o.value=!0,!await h.value.validate()){o.value=!1;return}await z(async s=>{await s.patch(`/users/${p.id}`,n)},{successCb:s=>{s.success({message:"Successfully updated your password!"})},userErrorCb:s=>{s.error({message:"Error. Check the data."})}}),o.value=!1},y=()=>{b.value=!0},e=async()=>{await z(async m=>{await m.delete(`users/${p.id}`)},{successCb:m=>{m.success({message:"Account deleted"}),i.$reset(),d.push({name:"login"})}})},w={password:[{required:!0,message:"Password is required",trigger:"blur"},{min:5,message:"Password length should be at least 5 characters",trigger:"blur"}],confirmPassword:[{validator:(m,s,v)=>{s===""?v(new Error("Please input the password again")):s!==n.password?v(new Error("Two inputs don't match!")):v()},trigger:"blur"}]};return(m,s)=>{const v=r("el-input"),P=r("el-form-item"),k=r("el-button"),E=r("el-dialog"),u=r("el-form"),I=T("loading");return c(),_(u,{model:n,rules:w,size:"large",class:"flex flex-col",ref_key:"form",ref:h,"label-position":"top"},{default:t(()=>[ie,de,l(P,{class:"my-2",label:"Password",prop:"password"},{default:t(()=>[l(v,{modelValue:n.password,"onUpdate:modelValue":s[0]||(s[0]=x=>n.password=x),type:"password"},null,8,["modelValue"])]),_:1}),l(P,{label:"Confirm password",prop:"confirmPassword"},{default:t(()=>[l(v,{modelValue:n.confirmPassword,"onUpdate:modelValue":s[1]||(s[1]=x=>n.confirmPassword=x),type:"password"},null,8,["modelValue"])]),_:1}),a("div",pe,[q((c(),_(k,{color:"#4a934a",size:"default",onClick:U,plain:"",dark:f(C)},{default:t(()=>[V("Save")]),_:1},8,["dark"])),[[I,o.value]])]),a("div",me,[l(k,{type:"danger",plain:"",dark:f(C),onClick:y},{default:t(()=>[V("Delete account")]),_:1},8,["dark"]),l(E,{modelValue:b.value,"onUpdate:modelValue":s[3]||(s[3]=x=>b.value=x),title:"Are you sure?",width:"30%"},{footer:t(()=>[l(k,{onClick:s[2]||(s[2]=x=>b.value=!1)},{default:t(()=>[V("Cancel")]),_:1}),l(k,{type:"danger",onClick:e},{default:t(()=>[V(" Confirm ")]),_:1})]),default:t(()=>[_e]),_:1},8,["modelValue"])])]),_:1},8,["model"])}}}),ve={key:1,class:"h-full"},ge={key:3},ye=S({__name:"Settings",setup(g){const i=H(),d=J(()=>!!i.params.slug);return(p,o)=>{const n=r("el-empty");return d.value?(c(),A("div",ve,[f(i).params.slug==="profile"?(c(),_(le,{key:0})):f(i).params.slug==="account"?(c(),_(fe,{key:1})):f(i).params.slug==="appearance"?(c(),_(ce,{key:2})):(c(),A("p",ge,"Error: no such page"))])):(c(),_(n,{key:0,description:"Select a category"}))}}});export{ye as default};
