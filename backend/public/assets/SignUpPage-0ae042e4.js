import{$ as w,a3 as h,a0 as V,E as x,q as D,a as i,b as P,m as E,e as r,w as a,F as b,n as y,f as d}from"./index-9ca6b9fc.js";import{i as f}from"./CheckResourseItemExists-a877095c.js";import"./DayJs-c6e502d2.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";const k={setup(){return{Message:w,Lock:h,User:V,RouterLink:x}},data(){return{formData:{username:"",email:"",password:"",confirmPassword:""},loading:!1,validationRules:{username:[{validator:(n,e,s)=>{if(!e)return s(new Error("Username is required"));f("users","username",e,s)},trigger:"blur"}],email:[{required:!0,message:"Email is required",trigger:"blur"},{type:"email",message:"Email is not in correct format",trigger:"blur"},{validator:(n,e,s)=>{f("users","email",e,s)},trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"},{min:5,message:"Password length should be at least 5 characters",trigger:"blur"}],confirmPassword:[{validator:(n,e,s)=>e?e.length<5?s(new Error("Password length should be at least 5 characters")):e!==this.formData.password?s(new Error("Passwords don`t match")):s():s(new Error("Password confirmation is required"))}]}}},methods:{async signup(){if(this.loading=!0,!await this.$refs.form.validate()){this.loading=!1;return}await D(async e=>{await e.post("/auth/signup",this.formData)},{successCb:e=>{e.success("Account created successfully!"),this.$router.push({name:"login"})},userErrorCb:e=>e.error("Check the credentials and try again!")}),this.loading=!1}}},C=y("h2",null,"Sign up",-1);function q(n,e,s,u,o,p){const m=i("el-input"),l=i("el-form-item"),c=i("el-button"),g=i("el-form"),_=i("router-link");return P(),E(b,null,[C,r(g,{model:o.formData,"label-position":"right",size:"large",rules:o.validationRules,ref:"form","status-icon":""},{default:a(()=>[r(l,{prop:"username"},{default:a(()=>[r(m,{modelValue:o.formData.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.formData.username=t),placeholder:"Username","prefix-icon":u.User,autofocus:""},null,8,["modelValue","prefix-icon"])]),_:1}),r(l,{prop:"email"},{default:a(()=>[r(m,{modelValue:o.formData.email,"onUpdate:modelValue":e[1]||(e[1]=t=>o.formData.email=t),placeholder:"E-mail","prefix-icon":u.Message},null,8,["modelValue","prefix-icon"])]),_:1}),r(l,{prop:"password"},{default:a(()=>[r(m,{modelValue:o.formData.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.formData.password=t),type:"password",placeholder:"Password","prefix-icon":u.Lock},null,8,["modelValue","prefix-icon"])]),_:1}),r(l,{prop:"confirmPassword"},{default:a(()=>[r(m,{modelValue:o.formData.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=t=>o.formData.confirmPassword=t),type:"password",placeholder:"Confirm password","prefix-icon":u.Lock},null,8,["modelValue","prefix-icon"])]),_:1}),r(l,null,{default:a(()=>[r(c,{type:"primary",onClick:p.signup,loading:o.loading},{default:a(()=>[d("Sign up")]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules"]),r(_,{to:"login"},{default:a(()=>[d("Have an account?")]),_:1})],64)}const R=U(k,[["render",q]]);export{R as default};
